## 微前端概述

   微前端概念是ThoughtWorks在2016年提出来的，它将微服务理念扩展到前端开发，解决中台微服务化后，前端由于仍为单体而存在的逻辑繁杂和臃肿的问题。微前端是按照前端设计方法在前端同时构建多个可以独立部署、完全自治、松耦合的页面组合，其中每个组合只负责特定的 UI 元素和功能。

   微前端与微服务都是希望将单体应用，按照一定的规则拆分为多个可以独立运行、独立开发、独立部署、独立运维的微服务或者页面聚合，从而满足业务快速变化及分布式多团队并行开发的需求。

   微前端除了可以实现前端页面的解耦外，还可实现前端页面的复用，做到“**一次开发，多端复用**”，这也与中台服务共享理念是一脉相承。

## 从单体前端到微前端 

​    传统的软件项目往往采用单体式架构，前端往往由一个团队创建并维护一个 Web 应用程序，通过API网关从微服务调用服务。随着时间的推移，前端往往会越来越臃肿，越来越难维护。

   随着5G技术的应用，企业活动将进一步移动化和线上化，过去企业的通常做法是为不同的应用开发出很多独立的APP。但是用户来并不想装那么多APP！为了提高用户体验，实现统一运营，很多企业开始缩减APP的数量，通过一个APP集成所有应用功能。

   试想如果将企业内所有前端页面、流程设计以及前端与后端集成的工作都交给前端项目，将原来独立和分散的应用，展示在一个巴掌大的手机屏幕上。前端项目将会面对无数的中台项目和成千上万不太熟悉的API接口，这绝对会是一场灾难。

   相对互联网企业而言，传统企业的渠道应用更多样化，有面向内部人员的柜台类应用、面向外部客户的互联网电商及移动APP类应用，还有面向商业生态圈的第三方API集成。由于渠道的差异，传统企业前端设计将会更多样化和复杂化。

   传统企业在实施中台战略时，为满足前端和中台多渠道共享和复用，部分场景还应有别于阿里巴巴的中台战略。传统企业除了要像阿里巴巴一样进行通用共享服务（主要提供共享API）的中台化建设外，还需要对核心专属业务（除API外，还存在大量面向用户的页面）进行中台化建设，以满足不同渠道的业务复用的需求。

![img](https:////upload-images.jianshu.io/upload_images/15900223-a20d080f834be4cd.png?imageMogr2/auto-orient/strip|imageView2/2/w/1093/format/webp)

从单体前端到微前端

   如何实现前端复用，降低前端集成的复杂度？

   在前端设计时，我们可以参考微服务设计方法，遵循单一职责和共享原则，按照领域模型和微服务边界，将前端页面进行拆分和组合形成微前端，与中台微服务组合成业务单元。

   **业务单元定义：**在前后端分离架构模式下，微前端页面与中台微服务共同组成一个业务单元。在同一个业务单元内，从前端页面、中台微服务到后端数据可以独立开发、测试、部署和运维，在业务单元内自包含完成中台领域内的部分或全部业务功能。

   **项目职责和系统边界**

   1）前端项目主要负责前端页面的集成、页面风格设计和流程控制，以及与微前端集成相关的微前端加载、微前端注册、页面路由以及数据共享。

   2）后端中台项目负责业务单元内中台微服务以及微服务对应微前端开发和集成。

   通用和专属中台项目既面向第三方生态圈提供API服务，也面向前端集成主页面提供微前端页面复用。微前端和中台微服务组合成业务单元为多渠道业务提供从前端到后台的页面和业务逻辑复用。在面向多渠道业务页面复用时，微前端需要做好页面风格适配，以满足不同渠道界面风格的要求。

   通过职责分工和应用边界的清晰划分，前端项目专注于微前端集成，后端项目专职做好本业务领域内中台微服务开发和微前端集成，确保领域内前端页面和后端业务逻辑作为一个业务单元整体高可用。

   由于微前端和微服务之间的API集成已由中台项目完成，前端项目可基于微前端实现**拼图**式开发，在实现前后端复用的同时，大大降低前端集成复杂度。   

## 微前端与微服务组合的几种形态

​    微前端与微服务可以有多种组合方式，以实现不同的业务目标。

​    一个虚框内微前端、中台微服务共同组成一个业务单元（如下图）。虚框内组件可以按照业务单元分前端和后端进行独立部署。

​    微前端页面包括业务操作必需的页面要素，不含页面导航等要素，页面导航功能位于前端集成主页面内。

​    微前端页面稍加改造就可以完成简单的单一场景业务，也可根据页面路由动态加载到前端集成主页面完成复杂组合场景业务。

![img](https:////upload-images.jianshu.io/upload_images/15900223-cd23699fd1993068.png?imageMogr2/auto-orient/strip|imageView2/2/w/736/format/webp)

微前端的几种形态

   微前端与微服务的组合主要有以下几类形式。

   1）单一类微前端：一个微前端和一个中台微服务组成一个业务单元。微前端完成业务单元内页面流程和前端操作，中台微服务完成后端业务逻辑，业务单元功能独立且自包含。微前端可按照页面路由动态加载至前端集成主页面。

   2）组合类微前端：一个微前端与多个中台微服务组成业务单元。微前端通过对多个中台微服务进行服务编排和组合，完成业务单元内较复杂的页面流程和前端操作。业务逻辑由后端多个微服务组合完成，如：可由专属业务中台与通用中台微服务组合，也可由同一领域内多个微服务组合。在微前端设计时，微前端对应的组合微服务的数量要均衡考虑，否则很容易将微前端开发成单体前端。同时业务单元的领域边界要清晰，避免由于功能交叉而导致单元与单元之间的耦合，影响项目团队职责边界，进而影响到部署、测试以及运维等。

   3）通用共享类微前端：一个微前端与一个或多个通用中台微服务组成共享类业务单元。通用共享类微前端一般通过前端集成主页面，以共享页面的模式与其他微前端页面组合，共同完成业务流程。该类微前端通常对应通用中台共享类微服务。

## 微前端的价值

微前端架构具备以下几个核心价值：

- 技术栈无关 主框架不限制接入应用的技术栈，子应用具备完全自主权
- 独立开发、独立部署 子应用仓库独立，前后端可独立开发，部署完成后主框架自动完成同步更新
- 独立运行时 每个子应用之间状态隔离，运行时状态不共享

微前端架构旨在解决单体应用在一个相对长的时间跨度下，由于参与的人员、团队的增多、变迁，从一个普通应用演变成一个巨石应用([Frontend Monolith](https://link.zhihu.com/?target=https%3A//www.youtube.com/watch%3Fv%3DpU1gXA0rfwc))后，随之而来的应用不可维护的问题。这类问题在企业级 Web 应用中尤其常见。